# Workscope-20260129-165213

## Workscope ID
20260129-165213

## Navigation Path
1. `docs/core/Action-Plan.md` (Phase 0, item 0.4)
2. `docs/tickets/open/upgrade-trial-data-schema-1-3.md`

## Phase Inventory (Terminal Checkboxlist)

**Document:** `docs/tickets/open/upgrade-trial-data-schema-1-3.md`

```
PHASE INVENTORY FOR upgrade-trial-data-schema-1-3.md:
Phase 0: Not applicable (no Phase 0 in this document)
Phase 1: CLEAR
Phase 2: CLEAR
Phase 3: CLEAR
Phase 4: CLEAR
Phase 5: 5.1 - Update `schema_version` from `"1.2"` to `"1.3"` in the output assembly
Phase 6: 6.1 - Update `docs/experiments/guides/Trial-Analysis-Guide.md` Section 3.4
Phase 7: 7.1 - Run the updated script on `dev/misc/barebones-2121/20260128-150640`

FIRST AVAILABLE PHASE: Phase 5
FIRST AVAILABLE ITEM: 5.1 - Update `schema_version` from `"1.2"` to `"1.3"` in the output assembly
```

## Selected Tasks

**Phase 5: Update Schema and Command Documentation**

- [ ] **5.1** - Update `schema_version` from `"1.2"` to `"1.3"` in the output assembly
- [ ] **5.2** - Update the `## Output Schema Reference` section in `.claude/commands/update-trial-data.md` to document all new fields, including the JSONL field name mapping, `compaction_loss` formula and interpretation, `persistence_mapping` structure (both with and without persistence), and the `peak_cache_read` convenience alias note
- [ ] **5.3** - Verify the script handles re-processing: run on an existing Schema 1.2 trial and confirm clean upgrade to 1.3

**Total Leaf Tasks**: 3

## Phase 0 Status (Root Action Plan)

**Status**: BLOCKING

Phase 0 has one available item:
- 0.4 - Update `trial_data.json` to Schema 1.3 (see `docs/tickets/open/upgrade-trial-data-schema-1-3.md`)

This is the Phase 0 item that led to this workscope through navigation.

## Context Documents

**Primary Context:**
- docs/core/Action-Plan.md
- docs/tickets/open/upgrade-trial-data-schema-1-3.md

**Implementation Files:**
- dev/karpathy/extract_trial_data.py
- .claude/commands/update-trial-data.md

**Related Documentation:**
- docs/experiments/guides/Trial-Analysis-Guide.md
- docs/experiments/results/Build-Scan-Discrepancy-Analysis.md

**Verification Data:**
- dev/misc/barebones-2121/20260128-150640/trial_data.json
- dev/misc/repro-attempts-04-2120/20260127-095002/trial_data.json

## Directive

None provided.

## Work Description

This workscope finalizes the Schema 1.3 upgrade by updating the schema version identifier, documenting the new fields in the command specification, and verifying backward compatibility through re-processing tests.

The previous phases (1-4) have already implemented all the core extraction logic for usage data, reset enrichment, persistence mapping, and derived metrics. This phase ensures those implementations are properly versioned, documented, and tested for re-processing existing trials.

Key deliverables:
1. Schema version bumped to "1.3" in the extraction script output
2. Complete documentation of new Schema 1.3 fields in the command specification
3. Verification that re-processing existing Schema 1.2 trials produces valid Schema 1.3 output
