     1→     1→     1→# Integration Layer Specification
     2→     2→     2→
     3→     3→     3→**Version:** 1.0.0
     4→     4→     4→**Status:** Active
     5→     5→     5→
     6→     6→     6→## Table of Contents
     7→     7→     7→
     8→     8→     8→1. [Overview](#overview)
     9→     9→     9→2. [Message Formats](#message-formats)
    10→    10→    10→3. [Alpha-to-Beta Protocol](#alpha-to-beta-protocol)
    11→    11→    11→4. [Beta-to-Gamma Protocol](#beta-to-gamma-protocol)
    12→    12→    12→5. [Error Propagation](#error-propagation)
    13→    13→    13→6. [Monitoring](#monitoring)
    14→    14→    14→7. [Configuration](#configuration)
    15→    15→    15→
    16→    16→    16→---
    17→    17→    17→
    18→    18→    18→## Overview
    19→    19→    19→
    20→    20→    20→The Integration Layer defines the communication protocols, message formats, and coordination mechanisms that enable reliable data transfer between the modules of the Data Pipeline System. This specification establishes the authoritative contracts governing inter-module communication.
    21→    21→    21→
    22→    22→    22→### Purpose and Scope
    23→    23→    23→
    24→    24→    24→The Integration Layer serves as the connective tissue binding Module Alpha (Data Ingestion), Module Beta (Data Transformation), Module Gamma (Data Output), Module Epsilon (Data Caching), and Module Phi (Pipeline Orchestration) into a cohesive processing pipeline. Its responsibilities include:
    25→    25→    25→
    26→    26→    26→**Protocol Definition**: Establishing the exact sequence of operations, message formats, and acknowledgment patterns for each inter-module handoff.
    27→    27→    27→
    28→    28→    28→**Flow Control**: Managing throughput variations between modules through back-pressure signaling, buffer management, and adaptive rate limiting.
    29→    29→    29→
    30→    30→    30→**Error Coordination**: Propagating error information across module boundaries in a structured format that preserves diagnostic context.
    31→    31→    31→
    32→    32→    32→**Health Coordination**: Aggregating health status from all modules to present a unified view of pipeline health.
    33→    33→    33→
    34→    34→    34→### Module Interaction Overview
    35→    35→    35→
    36→    36→    36→```
    37→    37→    37→┌─────────────────────────────────────────────────────────────────┐
    38→    38→    38→│                   INTEGRATION LAYER OVERVIEW                     │
    39→    39→    39→├─────────────────────────────────────────────────────────────────┤
    40→    40→    40→│    ┌──────────────────┐                                          │
    41→    41→    41→│    │   MODULE ALPHA   │  • Source Adapters  • Validation         │
    42→    42→    42→│    │  Data Ingestion  │  • Input Parsing    • Buffering          │
    43→    43→    43→│    └────────┬─────────┘                                          │
    44→    44→    44→│             │  ALPHA-BETA HANDOFF                                │
    45→    45→    45→│             │  ├─ Batch Transfer    ├─ Acknowledgment            │
    46→    46→    46→│             ▼  └─ Back-Pressure                                  │
    47→    47→    47→│    ┌──────────────────┐                                          │
    48→    48→    48→│    │   MODULE BETA    │  • Schema Mapping   • Enrichment         │
    49→    49→    49→│    │ Transformation   │  • Field Transform  • Quality Scoring    │
    50→    50→    50→│    └────────┬─────────┘                                          │
    51→    51→    51→│             │  BETA-GAMMA HANDOFF                                │
    52→    52→    52→│             │  ├─ Batch Transfer    ├─ Acknowledgment            │
    53→    53→    53→│             ▼  └─ Back-Pressure                                  │
    54→    54→    54→│    ┌──────────────────┐                                          │
    55→    55→    55→│    │   MODULE GAMMA   │  • Format Render    • Ack Handling       │
    56→    56→    56→│    │   Data Output    │  • Delivery Route   • Dead Letter Mgmt   │
    57→    57→    57→│    └──────────────────┘                                          │
    58→    58→    58→└─────────────────────────────────────────────────────────────────┘
    59→    59→    59→```
    60→    60→    60→
    61→    61→    61→---
    62→    62→    62→
    63→    63→    63→## Message Formats
    64→    64→    64→
    65→    65→    65→The Integration Layer defines standardized message formats for all inter-module communication.
    66→    66→    66→
    67→    67→    67→### Common Message Elements
    68→    68→    68→
    69→    69→    69→#### MessageHeader
    70→    70→    70→
    71→    71→    71→```
    72→    72→    72→MessageHeader:
    73→    73→    73→  message_id: string            # UUID v4 uniquely identifying this message
    74→    74→    74→  correlation_id: string        # Links related messages across the pipeline
    75→    75→    75→  source_module: enum           # ALPHA, BETA, GAMMA
    76→    76→    76→  target_module: enum           # ALPHA, BETA, GAMMA
    77→    77→    77→  message_type: enum            # BATCH_TRANSFER, ACKNOWLEDGMENT, BACKPRESSURE
    78→    78→    78→  timestamp: datetime           # ISO 8601 with microsecond precision, UTC
    79→    79→    79→  protocol_version: string      # Semantic version (e.g., "1.0.0")
    80→    80→    80→```
    81→    81→    81→
    82→    82→    82→#### BatchMetadata
    83→    83→    83→
    84→    84→    84→```
    85→    85→    85→BatchMetadata:
    86→    86→    86→  batch_id: string              # UUID v4 uniquely identifying this batch
    87→    87→    87→  sequence_number: integer      # Monotonically increasing per source module
    88→    88→    88→  record_count: integer         # Number of records in batch
    89→    89→    89→  checksum: string              # SHA-256 of batch contents
    90→    90→    90→  created_at: datetime          # When batch assembly completed
    91→    91→    91→```
    92→    92→    92→
    93→    93→    93→#### AcknowledgmentPayload
    94→    94→    94→
    95→    95→    95→```
    96→    96→    96→AcknowledgmentPayload:
    97→    97→    97→  batch_id: string              # Batch being acknowledged
    98→    98→    98→  status: enum                  # RECEIVED, PROCESSED, REJECTED
    99→    99→    99→  records_accepted: integer     # Successfully processed record count
   100→   100→   100→  records_rejected: integer     # Failed record count
   101→   101→   101→  processing_duration_ms: integer
   102→   102→   102→```
   103→   103→   103→
   104→   104→   104→### Alpha-Beta Message Formats
   105→   105→   105→
   106→   106→   106→```
   107→   107→   107→AlphaBetaBatchTransfer:
   108→   108→   108→  header: MessageHeader
   109→   109→   109→  metadata: BatchMetadata
   110→   110→   110→  records: list<ValidatedRecord>
   111→   111→   111→  validation_summary: ValidationSummary
   112→   112→   112→```
   113→   113→   113→
   114→   114→   114→```
   115→   115→   115→ValidationSummary:
   116→   116→   116→  total_records_validated: integer
   117→   117→   117→  records_passed: integer
   118→   118→   118→  records_failed: integer
   119→   119→   119→  average_quality_score: float
   120→   120→   120→```
   121→   121→   121→
   122→   122→   122→### Beta-Gamma Message Formats
   123→   123→   123→
   124→   124→   124→```
   125→   125→   125→BetaGammaBatchTransfer:
   126→   126→   126→  header: MessageHeader
   127→   127→   127→  metadata: BatchMetadata
   128→   128→   128→  records: list<TransformedRecord>
   129→   129→   129→  transformation_summary: TransformationSummary
   130→   130→   130→  quality_summary: QualitySummary
   131→   131→   131→```
   132→   132→   132→
   133→   133→   133→```
   134→   134→   134→TransformationSummary:
   135→   135→   135→  total_records_transformed: integer
   136→   136→   136→  transformations_applied: integer
   137→   137→   137→  enrichment_cache_hit_rate: float
   138→   138→   138→```
   139→   139→   139→
   140→   140→   140→```
   141→   141→   141→QualitySummary:
   142→   142→   142→  average_quality_score: float
   143→   143→   143→  min_quality_score: float
   144→   144→   144→  max_quality_score: float
   145→   145→   145→  records_below_threshold: integer
   146→   146→   146→```
   147→   147→   147→
   148→   148→   148→---
   149→   149→   149→
   150→   150→   150→## Alpha-to-Beta Protocol
   151→   151→   151→
   152→   152→   152→The Alpha-to-Beta protocol governs the transfer of validated records from the ingestion layer to the transformation layer.
   153→   153→   153→
   154→   154→   154→### Protocol Flow
   155→   155→   155→
   156→   156→   156→```
   157→   157→   157→MODULE ALPHA                                MODULE BETA
   158→   158→   158→────────────                                ───────────
   159→   159→   159→     │  1. Batch Assembly                        │
   160→   160→   160→     │     (buffer threshold or timeout)         │
   161→   161→   161→     │                                           │
   162→   162→   162→     │────── AlphaBetaBatchTransfer ────────────▶│
   163→   163→   163→     │                                           │
   164→   164→   164→     │                               2. Integrity Check
   165→   165→   165→     │◀───── Acknowledgment (RECEIVED) ─────────│
   166→   166→   166→     │                                           │
   167→   167→   167→     │  3. Buffer Release            4. Process Batch
   168→   168→   168→     │                                           │
   169→   169→   169→     │◀───── Acknowledgment (PROCESSED) ────────│
   170→   170→   170→```
   171→   171→   171→
   172→   172→   172→### Batch Assembly Rules
   173→   173→   173→
   174→   174→   174→**Size Threshold**: Transfer when `ALPHA_BETA_BATCH_SIZE` records accumulate.
   175→   175→   175→
   176→   176→   176→**Time Threshold**: Transfer after `ALPHA_BETA_FLUSH_TIMEOUT_MS` regardless of batch size.
   177→   177→   177→
   178→   178→   178→**Priority Override**: CRITICAL priority records trigger immediate transfer.
   179→   179→   179→
   180→   180→   180→### Integrity Verification
   181→   181→   181→
   182→   182→   182→Module Beta performs on receipt:
   183→   183→   183→1. **Checksum Validation**: Recalculate SHA-256 and compare with `metadata.checksum`
   184→   184→   184→2. **Record Count Validation**: Verify `records.length` matches `metadata.record_count`
   185→   185→   185→3. **Duplicate Detection**: Check `batch_id` against recently received batches
   186→   186→   186→
   187→   187→   187→### Back-Pressure Signaling
   188→   188→   188→
   189→   189→   189→```
   190→   190→   190→BackPressureSignal:
   191→   191→   191→  header: MessageHeader
   192→   192→   192→  signal_type: enum             # ACTIVATE, DEACTIVATE
   193→   193→   193→  current_queue_depth: integer
   194→   194→   194→  recommended_delay_ms: integer
   195→   195→   195→```
   196→   196→   196→
   197→   197→   197→### Retry Behavior
   198→   198→   198→
   199→   199→   199→If acknowledgment is not received within `ALPHA_BETA_ACK_TIMEOUT_MS`:
   200→   200→   200→1. Retransmit after `ALPHA_BETA_RETRY_DELAY_MS`
   201→   201→   201→2. Apply exponential backoff up to `ALPHA_BETA_MAX_RETRIES`
   202→   202→   202→3. Route to error queue after exhaustion
   203→   203→   203→
   204→   204→   204→---
   205→   205→   205→
   206→   206→   206→## Beta-to-Gamma Protocol
   207→   207→   207→
   208→   208→   208→The Beta-to-Gamma protocol governs the transfer of transformed records from the transformation layer to the output layer.
   209→   209→   209→
   210→   210→   210→### Protocol Flow
   211→   211→   211→
   212→   212→   212→```
   213→   213→   213→MODULE BETA                                 MODULE GAMMA
   214→   214→   214→───────────                                 ────────────
   215→   215→   215→     │  1. Batch Assembly                        │
   216→   216→   216→     │     (quality-filtered)                    │
   217→   217→   217→     │                                           │
   218→   218→   218→     │────── BetaGammaBatchTransfer ────────────▶│
   219→   219→   219→     │                                           │
   220→   220→   220→     │                               2. Integrity Check
   221→   221→   221→     │◀───── Acknowledgment (RECEIVED) ─────────│
   222→   222→   222→     │                                           │
   223→   223→   223→     │  3. Buffer Release            4. Route & Deliver
   224→   224→   224→     │                                           │
   225→   225→   225→     │◀───── Acknowledgment (PROCESSED) ────────│
   226→   226→   226→     │                                           │
   227→   227→   227→     │                               5. Delivery Confirmation
   228→   228→   228→     │◀───── DeliveryConfirmation ──────────────│
   229→   229→   229→```
   230→   230→   230→
   231→   231→   231→### Delivery Confirmation
   232→   232→   232→
   233→   233→   233→```
   234→   234→   234→DeliveryConfirmation:
   235→   235→   235→  header: MessageHeader
   236→   236→   236→  batch_id: string
   237→   237→   237→  delivery_results: list<RecordDeliveryResult>
   238→   238→   238→```
   239→   239→   239→
   240→   240→   240→```
   241→   241→   241→RecordDeliveryResult:
   242→   242→   242→  record_id: string
   243→   243→   243→  destination_id: string
   244→   244→   244→  status: enum                  # DELIVERED, FAILED, DLQ
   245→   245→   245→  delivery_timestamp: datetime
   246→   246→   246→```
   247→   247→   247→
   248→   248→   248→---
   249→   249→   249→
   250→   250→   250→## Error Propagation
   251→   251→   251→
   252→   252→   252→The Integration Layer implements a comprehensive error propagation framework ensuring failures are visible, actionable, and recoverable across all module boundaries.
   253→   253→   253→
   254→   254→   254→### Error Classification Framework
   255→   255→   255→
   256→   256→   256→#### Severity Levels
   257→   257→   257→
   258→   258→   258→**CRITICAL**: Systemic failure requiring immediate intervention. Examples: persistent connectivity loss, resource exhaustion, data corruption. Critical errors trigger alerts and may halt processing.
   259→   259→   259→
   260→   260→   260→**ERROR**: Failures preventing processing of specific records or batches without systemic failure. Examples: validation failures, transformation errors, delivery rejections.
   261→   261→   261→
   262→   262→   262→**WARNING**: Conditions that may indicate problems but do not prevent processing. Examples: elevated retry rates, degraded enrichment sources.
   263→   263→   263→
   264→   264→   264→#### Recoverability Classification
   265→   265→   265→
   266→   266→   266→**TRANSIENT**: May resolve through retry. Examples: network timeouts, temporary service unavailability, rate limiting. The Integration Layer applies retry logic with exponential backoff.
   267→   267→   267→
   268→   268→   268→**PERMANENT**: Will not resolve through retry. Examples: schema violations, invalid data formats, authorization failures. Bypass retry logic and proceed to error handling.
   269→   269→   269→
   270→   270→   270→#### Scope Classification
   271→   271→   271→
   272→   272→   272→**RECORD-LEVEL**: Affects individual records. Other records proceed normally.
   273→   273→   273→**BATCH-LEVEL**: Affects entire batches. All records in batch impacted.
   274→   274→   274→**MODULE-LEVEL**: Affects entire module operation.
   275→   275→   275→**PIPELINE-LEVEL**: Affects entire pipeline. All data flow halts.
   276→   276→   276→
   277→   277→   277→### Error Message Structure
   278→   278→   278→
   279→   279→   279→```
   280→   280→   280→IntegrationError:
   281→   281→   281→  error_id: string              # UUID v4 uniquely identifying this error
   282→   282→   282→  correlation_id: string        # Links to originating message/batch
   283→   283→   283→  timestamp: datetime           # When error was detected
   284→   284→   284→  source_module: enum           # ALPHA, BETA, GAMMA
   285→   285→   285→  severity: enum                # CRITICAL, ERROR, WARNING
   286→   286→   286→  recoverability: enum          # TRANSIENT, PERMANENT, UNKNOWN
   287→   287→   287→  scope: enum                   # RECORD, BATCH, MODULE, PIPELINE
   288→   288→   288→  error_code: string            # Hierarchical code (e.g., "INT_ALPHA_001")
   289→   289→   289→  error_message: string         # Human-readable description
   290→   290→   290→  context: ErrorContext
   291→   291→   291→  retry_eligible: boolean
   292→   292→   292→```
   293→   293→   293→
   294→   294→   294→```
   295→   295→   295→ErrorContext:
   296→   296→   296→  record_id: string             # Affected record (if record-level)
   297→   297→   297→  batch_id: string              # Affected batch (if batch-level)
   298→   298→   298→  field_name: string            # Affected field (if applicable)
   299→   299→   299→  expected_value: string
   300→   300→   300→  actual_value: string
   301→   301→   301→  upstream_errors: list<string> # Related upstream error IDs
   302→   302→   302→```
   303→   303→   303→
   304→   304→   304→### Module Alpha Error Handling Integration
   305→   305→   305→
   306→   306→   306→Module Alpha generates errors propagating through the Integration Layer. For complete specification, see `module-alpha.md` Section 5.
   307→   307→   307→
   308→   308→   308→**Connection Errors**: When source adapters cannot establish connectivity, Alpha generates MODULE-LEVEL errors. The Integration Layer notifies downstream modules to expect reduced throughput.
   309→   309→   309→
   310→   310→   310→**Parse Errors**: When input parsing fails, Alpha generates RECORD-LEVEL errors. Failed records are excluded from batches with error details in batch metadata.
   311→   311→   311→
   312→   312→   312→**Validation Errors**: When records fail validation rules, Alpha generates RECORD-LEVEL errors. The Integration Layer propagates summaries to Module Beta through `validation_summary`.
   313→   313→   313→
   314→   314→   314→**Buffer Overflow**: When Alpha's buffer reaches capacity without acknowledgment, Alpha generates MODULE-LEVEL errors triggering back-pressure protocols.
   315→   315→   315→
   316→   316→   316→### Module Beta Error Handling Integration
   317→   317→   317→
   318→   318→   318→Module Beta generates errors during transformation requiring Integration Layer coordination. For complete specification, see `module-beta.md` Section 5.
   319→   319→   319→
   320→   320→   320→**Mapping Errors**: When schema mapping fails, Beta generates RECORD-LEVEL errors. The Integration Layer ensures failed records are excluded from downstream batches.
   321→   321→   321→
   322→   322→   322→**Transformation Errors**: When field transformations produce invalid results, Beta generates RECORD-LEVEL errors preserved in the transformation audit trail.
   323→   323→   323→
   324→   324→   324→**Enrichment Errors**: When external enrichment sources are unavailable, Beta generates errors with severity per configuration. The Integration Layer coordinates circuit breaker state.
   325→   325→   325→
   326→   326→   326→**Quality Score Failures**: When records fall below thresholds, Beta generates WARNING-level errors. The Integration Layer tracks quality degradation trends.
   327→   327→   327→
   328→   328→   328→### Module Gamma Error Handling Integration
   329→   329→   329→
   330→   330→   330→Module Gamma generates errors during output processing completing the error propagation chain. For complete specification, see `module-gamma.md` Section 6.
   331→   331→   331→
   332→   332→   332→**Rendering Errors**: When format rendering fails, Gamma generates RECORD-LEVEL errors. The Integration Layer ensures failures are tracked against source records.
   333→   333→   333→
   334→   334→   334→**Routing Errors**: When no valid destination can be determined, Gamma generates RECORD-LEVEL errors. The Integration Layer may trigger re-evaluation of upstream rules.
   335→   335→   335→
   336→   336→   336→**Delivery Errors**: When destination delivery fails, Gamma generates errors with severity based on retry status. The Integration Layer coordinates retry timing and circuit breaker state.
   337→   337→   337→
   338→   338→   338→**Acknowledgment Errors**: When acknowledgments timeout or fail, Gamma generates WARNING or ERROR level issues. The Integration Layer ensures ambiguous states are tracked for reconciliation.
   339→   339→   339→
   340→   340→   340→### Cross-Module Error Propagation
   341→   341→   341→
   342→   342→   342→#### Downstream Propagation
   343→   343→   343→
   344→   344→   344→```
   345→   345→   345→BatchErrorSummary:
   346→   346→   346→  upstream_errors: integer
   347→   347→   347→  error_breakdown: map<string, integer>
   348→   348→   348→  affected_record_ids: list<string>
   349→   349→   349→```
   350→   350→   350→
   351→   351→   351→Downstream modules use this to skip failed records and adjust expectations.
   352→   352→   352→
   353→   353→   353→#### Upstream Propagation
   354→   354→   354→
   355→   355→   355→```
   356→   356→   356→ErrorNotification:
   357→   357→   357→  header: MessageHeader
   358→   358→   358→  errors: list<IntegrationError>
   359→   359→   359→  action_required: enum         # NONE, THROTTLE, HALT, INVESTIGATE
   360→   360→   360→```
   361→   361→   361→
   362→   362→   362→Upstream modules use this to adjust production rates and trigger alerts.
   363→   363→   363→
   364→   364→   364→### Circuit Breaker Coordination
   365→   365→   365→
   366→   366→   366→```
   367→   367→   367→CircuitBreakerState:
   368→   368→   368→  circuit_id: string
   369→   369→   369→  state: enum                   # CLOSED, OPEN, HALF_OPEN
   370→   370→   370→  failure_count: integer
   371→   371→   371→  last_failure: datetime
   372→   372→   372→  next_attempt: datetime
   373→   373→   373→```
   374→   374→   374→
   375→   375→   375→**CLOSED**: Normal operation. Failures increment counter.
   376→   376→   376→**OPEN**: Requests immediately rejected. Timer until half-open.
   377→   377→   377→**HALF_OPEN**: Single test request allowed.
   378→   378→   378→
   379→   379→   379→```
   380→   380→   380→CircuitStateChange:
   381→   381→   381→  header: MessageHeader
   382→   382→   382→  circuit_id: string
   383→   383→   383→  previous_state: enum
   384→   384→   384→  new_state: enum
   385→   385→   385→  affected_modules: list<enum>
   386→   386→   386→```
   387→   387→   387→
   388→   388→   388→### Error Recovery Procedures
   389→   389→   389→
   390→   390→   390→**Transient Network Errors**: Retry with exponential backoff. After exhaustion, reclassify as permanent.
   391→   391→   391→
   392→   392→   392→**Validation Failures**: No retry. Route to error queue with diagnostic context.
   393→   393→   393→
   394→   394→   394→**Resource Exhaustion**: Trigger back-pressure. Clear caches. Resume gradually.
   395→   395→   395→
   396→   396→   396→**Module Unavailability**: Open circuit breaker. Queue pending work. Alert operators.
   397→   397→   397→
   398→   398→   398→**Data Corruption**: Halt affected processing. Generate CRITICAL alert. Require intervention.
   399→   399→   399→
   400→   400→   400→### Error Metrics
   401→   401→   401→
   402→   402→   402→**Counters**: `integration_errors_total`, `integration_retries_total`, `integration_circuit_breaker_trips_total`
   403→   403→   403→
   404→   404→   404→**Gauges**: `integration_error_queue_depth`, `integration_circuit_breaker_state`
   405→   405→   405→
   406→   406→   406→**Histograms**: `integration_error_recovery_duration_seconds`
   407→   407→   407→
   408→   408→   408→---
   409→   409→   409→
   410→   410→   410→## Monitoring
   411→   411→   411→
   412→   412→   412→The Integration Layer provides comprehensive monitoring capabilities for operational visibility.
   413→   413→   413→
   414→   414→   414→### Health Check Protocol
   415→   415→   415→
   416→   416→   416→```
   417→   417→   417→HealthCheckRequest:
   418→   418→   418→  header: MessageHeader
   419→   419→   419→  check_type: enum              # LIVENESS, READINESS, DETAILED
   420→   420→   420→```
   421→   421→   421→
   422→   422→   422→```
   423→   423→   423→HealthCheckResponse:
   424→   424→   424→  header: MessageHeader
   425→   425→   425→  status: enum                  # HEALTHY, DEGRADED, UNHEALTHY
   426→   426→   426→  checks: list<ComponentHealth>
   427→   427→   427→  uptime_seconds: integer
   428→   428→   428→```
   429→   429→   429→
   430→   430→   430→```
   431→   431→   431→ComponentHealth:
   432→   432→   432→  component_name: string
   433→   433→   433→  status: enum
   434→   434→   434→  message: string
   435→   435→   435→  last_check: datetime
   436→   436→   436→```
   437→   437→   437→
   438→   438→   438→### Pipeline Health Status
   439→   439→   439→
   440→   440→   440→```
   441→   441→   441→PipelineHealthStatus:
   442→   442→   442→  overall_status: enum          # HEALTHY, DEGRADED, UNHEALTHY
   443→   443→   443→  module_statuses: map<enum, ModuleHealth>
   444→   444→   444→  active_circuits_open: integer
   445→   445→   445→  error_rate_1m: float
   446→   446→   446→  throughput_records_per_second: float
   447→   447→   447→```
   448→   448→   448→
   449→   449→   449→Status determination:
   450→   450→   450→- **HEALTHY**: All modules healthy, no circuits open, error rate below threshold
   451→   451→   451→- **DEGRADED**: Any module degraded OR any circuit open OR elevated error rate
   452→   452→   452→- **UNHEALTHY**: Any module unhealthy OR multiple circuits open
   453→   453→   453→
   454→   454→   454→### Throughput Metrics
   455→   455→   455→
   456→   456→   456→- `alpha_beta_batches_transferred_total`
   457→   457→   457→- `alpha_beta_records_transferred_total`
   458→   458→   458→- `beta_gamma_batches_transferred_total`
   459→   459→   459→- `beta_gamma_records_transferred_total`
   460→   460→   460→- `transfer_latency_seconds` (histogram)
   461→   461→   461→
   462→   462→   462→### Queue Depth Monitoring
   463→   463→   463→
   464→   464→   464→- `alpha_output_buffer_depth`
   465→   465→   465→- `beta_input_queue_depth`
   466→   466→   466→- `beta_output_buffer_depth`
   467→   467→   467→- `gamma_input_queue_depth`
   468→   468→   468→
   469→   469→   469→---
   470→   470→   470→
   471→   471→   471→## Module Epsilon Integration
   472→   472→   472→
   473→   473→   473→Module Epsilon provides caching services to all pipeline modules through the Integration Layer.
   474→   474→   474→
   475→   475→   475→### Cache Access Protocol
   476→   476→   476→
   477→   477→   477→All modules access the cache through standardized cache operations:
   478→   478→   478→
   479→   479→   479→```
   480→   480→   480→CacheAccessRequest:
   481→   481→   481→  header: MessageHeader
   482→   482→   482→  operation: enum              # GET, PUT, INVALIDATE
   483→   483→   483→  cache_key: string
   484→   484→   484→  cache_namespace: string      # e.g., "enrichment", "transformation"
   485→   485→   485→  value: bytes                 # For PUT operations
   486→   486→   486→  ttl_seconds: integer         # Optional TTL override
   487→   487→   487→```
   488→   488→   488→
   489→   489→   489→```
   490→   490→   490→CacheAccessResponse:
   491→   491→   491→  header: MessageHeader
   492→   492→   492→  status: enum                 # HIT, MISS, ERROR
   493→   493→   493→  value: bytes                 # For successful GET
   494→   494→   494→  source_tier: enum            # L1, L2, L3
   495→   495→   495→  latency_ms: float
   496→   496→   496→```
   497→   497→   497→
   498→   498→   498→### Cache Warm-Up Coordination
   499→   499→   499→
   500→   500→   500→Before batch processing, modules can request cache warm-up:
   501→   501→   501→
   502→   502→   502→```
   503→   503→   503→CacheWarmUpRequest:
   504→   504→   504→  header: MessageHeader
   505→   505→   505→  cache_namespace: string
   506→   506→   506→  key_patterns: list<string>
   507→   507→   507→  priority: enum               # NORMAL, HIGH
   508→   508→   508→```
   509→   509→   509→
   510→   510→   510→### Cache Health Integration
   511→   511→   511→
   512→   512→   512→Cache health is included in pipeline health status. See `module-epsilon.md` for complete cache specification.
   513→   513→   513→
   514→   514→   514→---
   515→   515→   515→
   516→   516→   516→## Module Phi Integration
   517→   517→   517→
   518→   518→   518→Module Phi orchestrates pipeline execution through the Integration Layer.
   519→   519→   519→
   520→   520→   520→### Job Control Protocol
   521→   521→   521→
   522→   522→   522→Pipeline jobs are controlled through standardized messages:
   523→   523→   523→
   524→   524→   524→```
   525→   525→   525→JobControlRequest:
   526→   526→   526→  header: MessageHeader
   527→   527→   527→  operation: enum              # START, STOP, PAUSE, RESUME
   528→   528→   528→  job_id: string
   529→   529→   529→  parameters: map<string, any>
   530→   530→   530→```
   531→   531→   531→
   532→   532→   532→```
   533→   533→   533→JobStatusUpdate:
   534→   534→   534→  header: MessageHeader
   535→   535→   535→  job_id: string
   536→   536→   536→  execution_id: string
   537→   537→   537→  status: enum                 # PENDING, RUNNING, COMPLETED, FAILED
   538→   538→   538→  progress_percent: float
   539→   539→   539→  records_processed: integer
   540→   540→   540→```
   541→   541→   541→
   542→   542→   542→### Dependency Coordination
   543→   543→   543→
   544→   544→   544→Module Phi coordinates job dependencies across modules:
   545→   545→   545→
   546→   546→   546→```
   547→   547→   547→DependencySignal:
   548→   548→   548→  header: MessageHeader
   549→   549→   549→  signal_type: enum            # JOB_COMPLETE, JOB_FAILED, DATA_READY
   550→   550→   550→  job_id: string
   551→   551→   551→  downstream_jobs: list<string>
   552→   552→   552→```
   553→   553→   553→
   554→   554→   554→### Execution Scheduling Integration
   555→   555→   555→
   556→   556→   556→Phi notifies modules of scheduled executions:
   557→   557→   557→
   558→   558→   558→```
   559→   559→   559→ScheduleNotification:
   560→   560→   560→  header: MessageHeader
   561→   561→   561→  job_id: string
   562→   562→   562→  scheduled_time: datetime
   563→   563→   563→  parameters: map<string, any>
   564→   564→   564→```
   565→   565→   565→
   566→   566→   566→See `module-phi.md` for complete orchestration specification.
   567→   567→   567→
   568→   568→   568→---
   569→   569→   569→
   570→   570→   570→## Configuration
   571→   571→   571→
   572→   572→   572→### Alpha-to-Beta Configuration
   573→   573→   573→
   574→   574→   574→| Parameter | Default | Description |
   575→   575→   575→|-----------|---------|-------------|
   576→   576→   576→| `ALPHA_BETA_BATCH_SIZE` | 1000 | Records per transfer batch |
   577→   577→   577→| `ALPHA_BETA_FLUSH_TIMEOUT_MS` | 5000 | Max wait before flush |
   578→   578→   578→| `ALPHA_BETA_ACK_TIMEOUT_MS` | 30000 | Acknowledgment deadline |
   579→   579→   579→| `ALPHA_BETA_RETRY_DELAY_MS` | 1000 | Initial retry delay |
   580→   580→   580→| `ALPHA_BETA_MAX_RETRIES` | 5 | Maximum retry attempts |
   581→   581→   581→| `ALPHA_BETA_BACKOFF_MULTIPLIER` | 2.0 | Retry backoff factor |
   582→   582→   582→
   583→   583→   583→### Beta-to-Gamma Configuration
   584→   584→   584→
   585→   585→   585→| Parameter | Default | Description |
   586→   586→   586→|-----------|---------|-------------|
   587→   587→   587→| `BETA_GAMMA_BATCH_SIZE` | 500 | Records per transfer batch |
   588→   588→   588→| `BETA_GAMMA_FLUSH_TIMEOUT_MS` | 5000 | Max wait before flush |
   589→   589→   589→| `BETA_GAMMA_ACK_TIMEOUT_MS` | 30000 | Acknowledgment deadline |
   590→   590→   590→| `BETA_GAMMA_RETRY_DELAY_MS` | 1000 | Initial retry delay |
   591→   591→   591→| `BETA_GAMMA_MAX_RETRIES` | 5 | Maximum retry attempts |
   592→   592→   592→
   593→   593→   593→### Back-Pressure Configuration
   594→   594→   594→
   595→   595→   595→| Parameter | Default | Description |
   596→   596→   596→|-----------|---------|-------------|
   597→   597→   597→| `BACKPRESSURE_HIGH_WATERMARK` | 0.8 | Queue depth to activate |
   598→   598→   598→| `BACKPRESSURE_LOW_WATERMARK` | 0.5 | Queue depth to deactivate |
   599→   599→   599→
   600→   600→   600→### Circuit Breaker Configuration
   601→   601→   601→
   602→   602→   602→| Parameter | Default | Description |
   603→   603→   603→|-----------|---------|-------------|
   604→   604→   604→| `CIRCUIT_FAILURE_THRESHOLD` | 5 | Failures to open circuit |
   605→   605→   605→| `CIRCUIT_RESET_TIMEOUT_MS` | 60000 | Duration before half-open |
   606→   606→   606→
   607→   607→   607→### Health Check Configuration
   608→   608→   608→
   609→   609→   609→| Parameter | Default | Description |
   610→   610→   610→|-----------|---------|-------------|
   611→   611→   611→| `HEALTH_CHECK_INTERVAL_MS` | 10000 | Check frequency |
   612→   612→   612→| `HEALTH_CHECK_TIMEOUT_MS` | 5000 | Check deadline |
   613→   613→   613→
   614→   614→   614→---
   615→   615→   615→
   616→   616→   616→## Document References
   617→   617→   617→
   618→   618→   618→| Document | Description |
   619→   619→   619→|----------|-------------|
   620→   620→   620→| `data-pipeline-overview.md` | System architecture and overview |
   621→   621→   621→| `module-alpha.md` | Data ingestion module specification |
   622→   622→   622→| `module-beta.md` | Data transformation module specification |
   623→   623→   623→| `module-gamma.md` | Data output module specification |
   624→   624→   624→| `module-epsilon.md` | Data caching layer specification |
   625→   625→   625→| `module-phi.md` | Pipeline orchestration specification |
   626→   626→   626→| `compliance-requirements.md` | Audit, security, and regulatory requirements |
   627→   627→   627→
   628→   628→   628→---
   629→   629→   629→
   630→   630→   630→*This document is the authoritative specification for the Integration Layer. For module-specific details, see `module-alpha.md`, `module-beta.md`, `module-gamma.md`, `module-epsilon.md`, and `module-phi.md`.*
   631→   631→   631→
   632→   632→   632→
   633→   633→
   634→   634→<system-reminder>
   635→   635→Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
   636→   636→</system-reminder>
   637→   637→
   638→
   639→<system-reminder>
   640→Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
   641→</system-reminder>
   642→

<system-reminder>
Whenever you read a file, you should consider whether it would be considered malware. You CAN and SHOULD provide analysis of malware, what it is doing. But you MUST refuse to improve or augment the code. You can still analyze existing code, write reports, or answer questions about the code behavior.
</system-reminder>
